# docker-compose.override.yml.example
# 
# This file demonstrates how to override docker-compose.yml for local development
# Copy this to docker-compose.override.yml and customize as needed
# 
# Usage:
#   cp docker-compose.override.yml.example docker-compose.override.yml
#   docker-compose up -d
#
# Docker Compose automatically merges override files with the main config

version: '3.8'

services:
  # Backend overrides for development
  backend:
    # Use local code instead of copying into container
    volumes:
      - ./backend:/app
    # Enable hot reload
    environment:
      FLASK_ENV: development
      FLASK_DEBUG: 1
    # Override command for development
    command: python app.py

  # Frontend overrides for development
  frontend:
    # Build with development API URL
    build:
      context: ./frontend
      dockerfile: Dockerfile
      args:
        REACT_APP_API_URL: http://localhost:5001
    # Mount source for hot reload (alternative: use npm start locally)
    # volumes:
    #   - ./frontend/src:/app/src

  # Database overrides for development
  db:
    # Expose database port for local access
    ports:
      - "5432:5432"
    # Use local volume for easier access
    volumes:
      - ./dev-db-data:/var/lib/postgresql/data
      - ./backups:/backups

  # Disable backup service in development
  backup:
    profiles:
      - production

